# name: Flutter APK Builder

# on:
#   push:
#     branches:
#       - DPC

# jobs:
#   build:
#     runs-on: ubuntu-latest
#     permissions:
#       contents: 'read'
#       id-token: 'write'

#     steps:
#       - name: Checkout repository
#         uses: actions/checkout@v2

#       - name: Authenticate to Google Cloud
#         uses: 'google-github-actions/auth@v2'
#         with:
#           workload_identity_provider: 'projects/123456789/locations/global/workloadIdentityPools/my-pool/providers/my-provider'  # Replace with your values
#           service_account: 'my-service-account@my-project.iam.gserviceaccount.com'  # Replace with your values

#       - name: Decode Google Drive credentials  # This step is no longer needed with workload identity federation
#         run: echo ${{ secrets.GOOGLE_DRIVE_CREDENTIALS }} | base64 -d > credentials.json

#       - name: Set Google application credentials  # This step is no longer needed with workload identity federation
#         run: export GOOGLE_APPLICATION_CREDENTIALS=credentials.json

#       - name: Set up Flutter
#         uses: subosito/flutter-action@v1
#         with:
#           channel: stable

#       - name: Install dependencies
#         run: flutter pub get

#       - name: Build APK
#         run: flutter build apk --release

#       - name: Upload APK to Google Drive
#         uses: google-github-actions/upload-cloud-storage@v2
#         with:
#           path: build/app/outputs/flutter-apk/app-release.apk
#           destination: app-release.apk
#           parent: 1q2Gj6HX0z-O9FQkvv8hXy-b2wR3ASejo  # Replace with your actual folder ID
#           process_gcloudignore: false
